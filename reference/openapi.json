{"openapi": "3.0.2", "info": {"title": "API Template", "description": "Run 'api-admin custom metadata' to change this information.", "version": "1.5.0"}, "paths": {"/users/": {"get": {"tags": ["Users"], "summary": "Get Users", "description": "Get all users or a specific user by their ID.\n\nuser_id is optional, and if omitted then all Users are returned.\n\nThis route is only allowed for Admins.", "operationId": "get_users_users__get", "parameters": [{"required": false, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "query"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"title": "Response Get Users Users  Get", "anyOf": [{"$ref": "#/components/schemas/UserResponse"}, {"type": "array", "items": {"$ref": "#/components/schemas/UserResponse"}}]}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/me": {"get": {"tags": ["Users"], "summary": "Get My User Data", "description": "Get the current user's data only.", "operationId": "get_my_user_data_users_me_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/MyUserResponse"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/{user_id}/make-admin": {"post": {"tags": ["Users"], "summary": "Make Admin", "description": "Make the User with this ID an Admin.", "operationId": "make_admin_users__user_id__make_admin_post", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/{user_id}/password": {"post": {"tags": ["Users"], "summary": "Change Password", "description": "Change the password for the specified user.\n\nCan only be done by an Admin, or the specific user that matches the user_id.", "operationId": "change_password_users__user_id__password_post", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserChangePasswordRequest"}}}, "required": true}, "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/{user_id}/ban": {"post": {"tags": ["Users"], "summary": "Ban User", "description": "Ban the specific user Id.\n\nAdmins only. The Admin cannot ban their own ID!", "operationId": "ban_user_users__user_id__ban_post", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/{user_id}/unban": {"post": {"tags": ["Users"], "summary": "Unban User", "description": "Ban the specific user Id.\n\nAdmins only.", "operationId": "unban_user_users__user_id__unban_post", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/users/{user_id}": {"put": {"tags": ["Users"], "summary": "Edit User", "description": "Update the specified User's data.\n\nAvailable for the specific requesting User, or an Admin.", "operationId": "edit_user_users__user_id__put", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserEditRequest"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/MyUserResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}, "delete": {"tags": ["Users"], "summary": "Delete User", "description": "Delete the specified User by user_id.\n\nAdmin only.", "operationId": "delete_user_users__user_id__delete", "parameters": [{"required": true, "schema": {"title": "User Id", "type": "integer"}, "name": "user_id", "in": "path"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"CustomHTTPBearer": []}]}}, "/register/": {"post": {"tags": ["Authentication"], "summary": "Register A New User", "description": "Register a new User and return a JWT token plus a Refresh Token.\n\nThe JWT token should be sent as a Bearer token for each access to a\nprotected route. It will expire after 120 minutes.\n\nWhen the JWT expires, the Refresh Token can be sent using the '/refresh'\nendpoint to return a new JWT Token. The Refresh token will last 30 days, and\ncannot be refreshed.", "operationId": "register_a_new_user_register__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserRegisterRequest"}}}, "required": true}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/login/": {"post": {"tags": ["Authentication"], "summary": "Login An Existing User", "description": "Login an existing User and return a JWT token plus a Refresh Token.\n\nThe JWT token should be sent as a Bearer token for each access to a\nprotected route. It will expire after 120 minutes.\n\nWhen the JWT expires, the Refresh Token can be sent using the '/refresh'\nendpoint to return a new JWT Token. The Refresh token will last 30 days, and\ncannot be refreshed.", "operationId": "login_an_existing_user_login__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserLoginRequest"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/refresh/": {"post": {"tags": ["Authentication"], "summary": "Refresh An Expired Token", "description": "Return a new JWT, given a valid Refresh token.\n\nThe Refresh token will not be updated at this time, it will still expire 30\ndays after original issue. At that time the User will need to login again.", "operationId": "refresh_an_expired_token_refresh__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenRefreshRequest"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenRefreshResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/verify/": {"get": {"tags": ["Authentication"], "summary": "Verify", "description": "Verify a new user.\n\nThe code is sent to  new user by email, which must then be validated here.\n\nWe dont need to return anything here, as success or errors will be handled\nby FastAPI exceptions.", "operationId": "verify_verify__get", "parameters": [{"required": false, "schema": {"title": "Code", "type": "string", "default": ""}, "name": "code", "in": "query"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}}, "components": {"schemas": {"HTTPValidationError": {"title": "HTTPValidationError", "type": "object", "properties": {"detail": {"title": "Detail", "type": "array", "items": {"$ref": "#/components/schemas/ValidationError"}}}}, "MyUserResponse": {"title": "MyUserResponse", "required": ["email", "first_name", "last_name"], "type": "object", "properties": {"email": {"title": "Email", "type": "string", "example": "user@example.com"}, "first_name": {"title": "First Name", "type": "string", "example": "John"}, "last_name": {"title": "Last Name", "type": "string", "example": "Doe"}}, "description": "Response for non-admin getting their own User data."}, "RoleType": {"title": "RoleType", "enum": ["user", "admin"], "description": "Contains the different Role types Users can have."}, "TokenRefreshRequest": {"title": "TokenRefreshRequest", "required": ["refresh"], "type": "object", "properties": {"refresh": {"title": "Refresh", "type": "string"}}, "description": "Request schema for refreshing a JWT token."}, "TokenRefreshResponse": {"title": "TokenRefreshResponse", "required": ["token"], "type": "object", "properties": {"token": {"title": "Token", "type": "string"}}, "description": "Return a new JWT only, after a refresh request."}, "TokenResponse": {"title": "TokenResponse", "required": ["token", "refresh"], "type": "object", "properties": {"token": {"title": "Token", "type": "string"}, "refresh": {"title": "Refresh", "type": "string"}}, "description": "Response Schema for Register/Login routes.\n\nThis returns a JWT token and a Refresh token."}, "UserChangePasswordRequest": {"title": "UserChangePasswordRequest", "required": ["password"], "type": "object", "properties": {"password": {"title": "Password", "type": "string", "example": "My S3cur3 P@ssw0rd"}}, "description": "Request Schema for changing a user's password."}, "UserEditRequest": {"title": "UserEditRequest", "required": ["email", "password", "first_name", "last_name"], "type": "object", "properties": {"email": {"title": "Email", "type": "string", "example": "user@example.com"}, "password": {"title": "Password", "type": "string", "example": "My S3cur3 P@ssw0rd"}, "first_name": {"title": "First Name", "type": "string", "example": "John"}, "last_name": {"title": "Last Name", "type": "string", "example": "Doe"}}, "description": "Request schema for Editing a User.\n\nFor now just inherit everything from the UserRegisterRequest"}, "UserLoginRequest": {"title": "UserLoginRequest", "required": ["email", "password"], "type": "object", "properties": {"email": {"title": "Email", "type": "string", "example": "user@example.com"}, "password": {"title": "Password", "type": "string", "example": "My S3cur3 P@ssw0rd"}}, "description": "Request schema for the Login Route."}, "UserRegisterRequest": {"title": "UserRegisterRequest", "required": ["email", "password", "first_name", "last_name"], "type": "object", "properties": {"email": {"title": "Email", "type": "string", "example": "user@example.com"}, "password": {"title": "Password", "type": "string", "example": "My S3cur3 P@ssw0rd"}, "first_name": {"title": "First Name", "type": "string", "example": "John"}, "last_name": {"title": "Last Name", "type": "string", "example": "Doe"}}, "description": "Request schema for the Register Route."}, "UserResponse": {"title": "UserResponse", "required": ["email", "first_name", "last_name", "role", "banned"], "type": "object", "properties": {"email": {"title": "Email", "type": "string", "example": "user@example.com"}, "id": {"title": "Id", "type": "integer", "default": 25}, "first_name": {"title": "First Name", "type": "string", "example": "John"}, "last_name": {"title": "Last Name", "type": "string", "example": "Doe"}, "role": {"allOf": [{"$ref": "#/components/schemas/RoleType"}], "example": "user"}, "banned": {"title": "Banned", "type": "boolean", "example": false}}, "description": "Response Schema for a User."}, "ValidationError": {"title": "ValidationError", "required": ["loc", "msg", "type"], "type": "object", "properties": {"loc": {"title": "Location", "type": "array", "items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}}, "msg": {"title": "Message", "type": "string"}, "type": {"title": "Error Type", "type": "string"}}}}, "securitySchemes": {"CustomHTTPBearer": {"type": "http", "scheme": "bearer"}}}}