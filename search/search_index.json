{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to FastAPI-Template","text":"<p>BETA Docs!</p> <p>This documentation is currently Beta status as it is still under active development. The in-depth Reference and Tutorial sections are not yet written.</p> <p>Version Refactor</p> <p>This template versioning has been refactored to start from Verison 0.4.0 . The original template was written for my own use and probably promoted to V 1.0.0 before it should have been, and there have been many updates and fixes since then.</p> <p>I will keep the old releases available for those who wish to use them (for a short time). I think it's better to do this now before there are more users who need to update their projects to future versions.</p> <p>All releases from now on will also contain a Git patch to upgrade from the previous version. This will be in the form of a <code>.patch</code> file which can be applied to their project using the <code>git apply</code> command. This will be documented in the release notes.</p>"},{"location":"#features","title":"Features","text":"<p>This template is a ready-to-use boilerplate for a FastAPI project. It has the following advantages to starting your own from scratch :</p> <ul> <li>Baked-in User database and management. Routes are provided to add/edit/delete   or ban (and unban) Users.</li> <li>Postgresql Integration, using SQLAlchemy ORM, no need for raw SQL queries   (unless you want to!). All database usage is Asynchronous.   Alembic is used to   control database migrations.</li> <li>Register and Login routes provided, both of which return a JWT token to be   used in all future requests. JWT Token expires 120 minutes after issue.</li> <li>JWT-based security as a Bearer Token to control access to all your routes.</li> <li>A <code>Refresh Token</code> with 30 day expiry is sent at time of register or login   (never again). This will enable easy re-authentication when the JWT expires   without needing to send username or password again, and should be done   automatically by the Front-End.</li> <li>A clean layout to help structure your project.</li> <li>A command-line admin tool. This allows to configure the project metadata   very easily, add users (and make admin), and run a development server. This   can easily be modified to add your own functionality (for example bulk add   data) since it is based on the excellent   Typer library.</li> <li>Database and Secrets are automatically read from Environment variables or a   <code>.env</code> file if that is provided.</li> <li>User email is validated for correct format on creation (however no checks are   performed to ensure the email or domain actually exists).</li> <li>Control permitted CORS Origin through Environment variables.</li> <li>Manager class set up to send emails to users, and by default an email is sent   when new users register. The content is set by a template (currently a   basic placeholder). This email has a link for the user to confirm their email   address - until this is done, the user cannot user the API.</li> <li>Docker and Compose file set up to develop and test this API using Docker</li> </ul> <p>The template Requires Python 3.9+</p>"},{"location":"#versioning","title":"Versioning","text":"<p>Current Release version is v0.4.2</p> <p>This template is still in very active development and is not yet ready for full production use. However, I am currently using it to develop my own projects, which include some production API's without issues. I will update the template as I find bugs or add new features. I will also be adding more documentation as I go.</p> <p>This project uses Semantic Versioning 2.0.0</p> <p>Given a version number <code>MAJOR</code>.<code>MINOR</code>.<code>PATCH</code>, increment the:</p> <ol> <li><code>MAJOR</code> version when you make incompatible API changes</li> <li><code>MINOR</code> version when you add functionality in a backward compatible manner</li> <li><code>PATCH</code> version when you make backward compatible bug fixes</li> </ol> <p>Additional labels for pre-release and build metadata are available as extensions to the MAJOR.MINOR.PATCH format.</p>"},{"location":"#github-discussions","title":"GitHub Discussions","text":"<p>Discussions are enabled on this repository, so if you have any problems, questions, suggestions or just want to chat about this template, please feel free to start a discussion.</p>"},{"location":"#follow-the-repository","title":"Follow the Repository","text":"<p>If you use this code in your own projects, I'd recommend at least to 'star' or follow the repository on GitHub. In this way you would be informed of any updates, bug fixes or new functionality </p>"},{"location":"#accreditation","title":"Accreditation","text":"<p>This template is free to use but I would request some accreditation. If you do use it in one of your applications, please put a small note in your readme stating that you based your project on this Template, with a link back to this repository. Thank You \ud83d\ude0a</p> <p>For those who let me know they are using this Template, I'll add links back to your project in this documentation.</p> <p>If this template saves you time/effort/money, or you just wish to show your appreciation for my work, why not Buy me a Coffee! \ud83d\ude03</p>"},{"location":"#funding-link","title":"Funding Link","text":"<p>The template does include a <code>.github/FUNDING.yml</code> file which contains a link to some sponsor pages. You can edit or delete this as you will or replace with your own details. If you really appreciate the Template, feel free to leave my details there in addition to your own, though this is entirely optional \ud83d\ude0a</p> <p>The funding file allows your GitHub visitors to sponsor or tip you as a thanks for your work.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":"<p>This is an auto-generated log of all the changes that have been made to the project since the first release, with the latest changes at the top.</p> <p>This project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"Unreleased","text":"<p>These are the changes that have been merged to the repository since the last release. If you want to try out these changes, you can install the latest version from the main branch by running:</p> <pre><code>$ pip install git+https://github.com/seapagan/github-changelog-md\n</code></pre> <p>or, if using poetry:</p> <p><pre><code>$ poetry add git+https://github.com/seapagan/github-changelog-md\n</code></pre> Everything in this section will be included in the next official release.</p> <p>Closed Issues</p> <ul> <li>Run Tests against Postgres database (#102) by pdrivom</li> </ul> <p>New Features</p> <ul> <li>Allow setting a custom API root path e.g. \"/api/v1\" to prepend to all routes (#386) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump github-changelog-md from 0.8.0 to 0.8.1 (#387) by dependabot[bot]</li> <li>Bump faker from 22.7.0 to 23.1.0 (#385) by dependabot[bot]</li> <li>Bump pytest-watcher from 0.3.5 to 0.4.1 (#384) by dependabot[bot]</li> <li>Bump pymarkdownlnt from 0.9.16 to 0.9.17 (#383) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.5.7 to 9.5.8 (#382) by dependabot[bot]</li> <li>Bump ruff from 0.2.0 to 0.2.1 (#380) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-february-07-2024","title":"v0.5.0 (February 07, 2024)","text":"<p>'A New Hope'</p> <p>This is the long-delayed release of <code>0.5.0</code> </p> <p>There are many breaking changes; check the documentation, discussions and all the 0.5.0 alpha and beta releases for information.</p> <ul> <li>Make the API an installable package and CLI command (#276) by seapagan</li> <li>Convert db to sqlalchemy 2 (#140) by seapagan</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v042-february-07-2024","title":"v0.4.2 (February 07, 2024)","text":"<p>'The Old Guard'</p> <p>Breaking Changes</p> <ul> <li>Ensure user reads the release notes for the current breaking changes (#377) by seapagan</li> <li>Merge version 0.5.0 (#281) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump ruff from 0.1.15 to 0.2.0 (#375) by dependabot[bot]</li> <li>Bump pyright from 1.1.349 to 1.1.350 (#374) by dependabot[bot]</li> <li>Bump pytest-sugar from 0.9.7 to 1.0.0 (#373) by dependabot[bot]</li> <li>Bump mkdocs-git-revision-date-localized-plugin from 1.2.2 to 1.2.4 (#372) by dependabot[bot]</li> <li>Bump fastapi from 0.109.0 to 0.109.2 (#371) by dependabot[bot]</li> <li>Bump pydantic from 2.6.0 to 2.6.1 (#370) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.5.6 to 9.5.7 (#369) by dependabot[bot]</li> <li>Bump pyfakefs from 5.3.4 to 5.3.5 (#368) by dependabot[bot]</li> <li>Bump faker from 22.6.0 to 22.7.0 (#367) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-beta1-february-01-2024","title":"v0.5.0-beta1 (February 01, 2024)","text":"<p>Closed Issues</p> <ul> <li>Intermittent test failures with 3.9 and 3.10 (#321) by seapagan</li> </ul> <p>Testing</p> <ul> <li>Continue writing missing tests (#341) by seapagan</li> <li>Continue testing on the <code>api-admin custom</code> CLI command (#313) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump ruff from 0.1.13 to 0.1.15 (#364) by dependabot[bot]</li> <li>Bump pydantic from 2.5.3 to 2.6.0 (#363) by dependabot[bot]</li> <li>Bump mkdocs-minify-plugin from 0.7.2 to 0.8.0 (#361) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.5.3 to 9.5.6 (#360) by dependabot[bot]</li> <li>Bump pyright from 1.1.348 to 1.1.349 (#358) by dependabot[bot]</li> <li>Bump pytest from 7.4.4 to 8.0.0 (#357) by dependabot[bot]</li> <li>Bump uvicorn from 0.27.0 to 0.27.0.post1 (#356) by dependabot[bot]</li> <li>Bump pytest-watcher from 0.3.4 to 0.3.5 (#355) by dependabot[bot]</li> <li>Bump faker from 21.0.1 to 22.6.0 (#354) by dependabot[bot]</li> <li>Bump pyright from 1.1.346 to 1.1.348 (#351) by dependabot[bot]</li> <li>and 24 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-alpha3-december-12-2023","title":"v0.5.0-alpha3 (December 12, 2023)","text":"<p>This version contains minor breaking changes to the way you will run the CLI tool. See the documentation for more information.</p> <p>Breaking Changes</p> <ul> <li>Make the API an installable package and CLI command (#276) by seapagan</li> </ul> <p>Merged Pull Requests</p> <ul> <li>Add 'pyright' tool to check out functionality (#279) by seapagan</li> </ul> <p>New Features</p> <ul> <li>Update docker config to the more recent image and postgres versions (#282) by seapagan</li> </ul> <p>Testing</p> <ul> <li>Add tests for the CLI functionality (#285) by seapagan</li> <li>Continue improving test coverage (#284) by seapagan</li> <li>Fix integration tests (#283) by seapagan</li> </ul> <p>Documentation</p> <ul> <li>Update and freshen the docs (#275) by seapagan</li> <li>Add a changelog to the project (#274) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump actions/setup-python from 4 to 5 (#311) by dependabot[bot]</li> <li>Bump ruff from 0.1.5 to 0.1.7 (#300) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.4.8 to 9.5.1 (#299) by dependabot[bot]</li> <li>Bump cryptography from 41.0.4 to 41.0.6 (#298) by dependabot[bot]</li> <li>Bump pydantic from 2.5.0 to 2.5.2 (#296) by dependabot[bot]</li> <li>Bump rich from 13.6.0 to 13.7.0 (#295) by dependabot[bot]</li> <li>Bump pydantic-settings from 2.0.3 to 2.1.0 (#294) by dependabot[bot]</li> <li>Bump mkdocs-swagger-ui-tag from 0.6.6 to 0.6.7 (#292) by dependabot[bot]</li> <li>Bump mkdocstrings from 0.23.0 to 0.24.0 (#291) by dependabot[bot]</li> <li>Bump github-changelog-md from 0.7.2 to 0.8.0 (#290) by dependabot[bot]</li> <li>and 5 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-alpha2-november-13-2023","title":"v0.5.0-alpha2 (November 13, 2023)","text":"<p>Refactoring</p> <ul> <li>Update Linting and Formatting to use <code>Ruff</code> instead (#273) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump uvicorn from 0.23.2 to 0.24.0.post1 (#272) by dependabot[bot]</li> <li>Bump sqlalchemy from 2.0.22 to 2.0.23 (#271) by dependabot[bot]</li> <li>Bump poethepoet from 0.24.1 to 0.24.2 (#270) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.4.7 to 9.4.8 (#269) by dependabot[bot]</li> <li>Bump poetry from 1.6.1 to 1.7.0 (#268) by dependabot[bot]</li> <li>Bump asyncpg from 0.28.0 to 0.29.0 (#267) by dependabot[bot]</li> <li>Bump faker from 19.11.0 to 19.13.0 (#265) by dependabot[bot]</li> <li>Bump pytest from 7.4.2 to 7.4.3 (#264) by dependabot[bot]</li> <li>Bump mkdocs-swagger-ui-tag from 0.6.5 to 0.6.6 (#263) by dependabot[bot]</li> <li>Bump alembic from 1.12.0 to 1.12.1 (#261) by dependabot[bot]</li> <li>and 19 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-alpha1-september-22-2023","title":"v0.5.0-alpha1 (September 22, 2023)","text":"<p>Testing</p> <ul> <li>Re-enable gh actions (#223) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump cryptography from 41.0.3 to 41.0.4 (#222) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.2.8 to 9.3.2 (#221) by dependabot[bot]</li> <li>Bump gitpython from 3.1.32 to 3.1.35 (#220) by dependabot[bot]</li> <li>Bump mkdocs-swagger-ui-tag from 0.6.4 to 0.6.5 (#219) by dependabot[bot]</li> <li>Bump rich from 13.5.2 to 13.5.3 (#218) by dependabot[bot]</li> <li>Bump faker from 19.3.1 to 19.6.1 (#217) by dependabot[bot]</li> <li>Bump black from 23.7.0 to 23.9.1 (#216) by dependabot[bot]</li> <li>Bump pytest from 7.4.1 to 7.4.2 (#214) by dependabot[bot]</li> <li>Bump pre-commit from 3.3.3 to 3.4.0 (#211) by dependabot[bot]</li> <li>Bump pymdown-extensions from 10.1 to 10.3 (#210) by dependabot[bot]</li> <li>and 7 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v050-alpha0-august-27-2023","title":"v0.5.0-alpha0 (August 27, 2023)","text":"<p>Breaking Changes</p> <ul> <li>Convert db to sqlalchemy 2 (#140) by seapagan</li> </ul> <p>New Features</p> <ul> <li>Update fastapi to latest version (#197) by seapagan</li> </ul> <p>Testing</p> <ul> <li>Start re-adding tests (#161) by seapagan</li> </ul> <p>Refactoring</p> <ul> <li>Update fastapi to latest version (#197) by seapagan</li> <li>Start re-adding tests (#161) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump cryptography from 41.0.1 to 41.0.3 (#196) by dependabot[bot]</li> <li>Bump certifi from 2023.5.7 to 2023.7.22 (#195) by dependabot[bot]</li> <li>Bump gitpython from 3.1.31 to 3.1.32 (#194) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.1.21 to 9.2.3 (#193) by dependabot[bot]</li> <li>Bump sqlalchemy from 2.0.19 to 2.0.20 (#192) by dependabot[bot]</li> <li>Bump pytest-randomly from 3.13.0 to 3.15.0 (#191) by dependabot[bot]</li> <li>Bump poetry from 1.5.1 to 1.6.1 (#190) by dependabot[bot]</li> <li>Bump mypy from 1.4.1 to 1.5.1 (#189) by dependabot[bot]</li> <li>Bump alembic from 1.11.2 to 1.11.3 (#187) by dependabot[bot]</li> <li>Bump mkdocs-swagger-ui-tag from 0.6.3 to 0.6.4 (#185) by dependabot[bot]</li> <li>and 22 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v041-july-11-2023","title":"v0.4.1 (July 11, 2023)","text":"<p>Breaking Changes</p> <ul> <li>Refactor application layout (potential BREAKING CHANGE) (#127) by seapagan</li> <li>Refactor versioning (#126) by seapagan</li> </ul> <p>Refactoring</p> <ul> <li>Migrate startup to lifespan (#131) by seapagan</li> </ul> <p>Documentation</p> <ul> <li>Add release version to docs (#130) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump sqlalchemy from 1.4.48 to 1.4.49 (#151) by dependabot[bot]</li> <li>Bump pytest-randomly from 3.12.0 to 3.13.0 (#150) by dependabot[bot]</li> <li>Bump anyio from 3.7.0 to 3.7.1 (#149) by dependabot[bot]</li> <li>Bump faker from 18.11.2 to 18.13.0 (#148) by dependabot[bot]</li> <li>Bump pytest-reverse from 1.6.0 to 1.7.0 (#146) by dependabot[bot]</li> <li>Bump poethepoet from 0.20.0 to 0.21.0 (#145) by dependabot[bot]</li> <li>Bump asyncpg from 0.27.0 to 0.28.0 (#144) by dependabot[bot]</li> <li>Bump fastapi-mail from 1.3.0 to 1.3.1 (#143) by dependabot[bot]</li> <li>Bump fastapi from 0.98.0 to 0.99.1 (#142) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.1.17 to 9.1.18 (#141) by dependabot[bot]</li> <li>and 7 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v040-june-19-2023","title":"v0.4.0 (June 19, 2023)","text":"<p>'Version refactor'</p> <p>Closed Issues</p> <ul> <li>Key Management secrets engine (#115) by pdrivom</li> <li>Internal Links on the web documentation site are broken. (#110) by seapagan</li> <li>Docker Support (#99) by pdrivom</li> <li>Add unit tests (#72) by Elia-238</li> </ul> <p>Merged Pull Requests</p> <ul> <li>Fix missing openapi schema for Docs (#119) by seapagan</li> <li>Fix documentation (#112) by pdrivom</li> <li>Improve CLI user functions (#109) by seapagan</li> <li>Clarify docs (#108) by seapagan</li> <li>Update .env.example file (#104) by seapagan</li> <li>Disable the Codacy coverage upload. (#97) by seapagan</li> <li>Further work on testing (#93) by seapagan</li> <li>Clear Pylint warnings (#89) by seapagan</li> </ul> <p>New Features</p> <ul> <li>Docker Support (#101) by pdrivom</li> </ul> <p>Testing</p> <ul> <li>Continue to improve test coverage (#92) by seapagan</li> </ul> <p>Bug Fixes</p> <ul> <li>Fix local link errors in Web Docs (#111) by seapagan</li> </ul> <p>Documentation</p> <ul> <li>Add custom domain for docs (#120) by seapagan</li> <li>Fix local link errors in Web Docs (#111) by seapagan</li> <li>Add development information to Docs website (#103) by seapagan</li> <li>Minimal tidying of documentation (#96) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump mkdocs-material from 9.1.15 to 9.1.16 (#124) by dependabot[bot]</li> <li>Bump pytest-mock from 3.10.0 to 3.11.1 (#123) by dependabot[bot]</li> <li>Bump pre-commit from 3.3.2 to 3.3.3 (#122) by dependabot[bot]</li> <li>Bump mkdocs-swagger-ui-tag from 0.6.1 to 0.6.2 (#121) by dependabot[bot]</li> <li>Bump pytest from 7.3.1 to 7.3.2 (#107) by dependabot[bot]</li> <li>Bump fastapi from 0.96.0 to 0.97.0 (#106) by dependabot[bot]</li> <li>Bump rich from 13.4.1 to 13.4.2 (#105) by dependabot[bot]</li> <li>Bump fastapi from 0.95.2 to 0.96.0 (#91) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p> <p>Version Numbering Change</p> <p>At this point, the version numbering for this project was refactored since it was not ready for a 1.0 release. The versioning will still follow Semantic Versioning, but the next release will be <code>0.4.0</code>.</p> <p>See this discussion for more of the reasoning behind this change.</p>"},{"location":"changelog/#v150-june-02-2023","title":"v1.5.0 (June 02, 2023)","text":"<p>New Features</p> <ul> <li>Setup Testing (#84) by seapagan</li> <li>Backport database changes (#83) by seapagan</li> </ul> <p>Testing</p> <ul> <li>Setup Testing (#84) by seapagan</li> </ul> <p>Documentation</p> <ul> <li>Add documentation site (#79) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump mkdocstrings from 0.21.2 to 0.22.0 (#87) by dependabot[bot]</li> <li>Bump mkdocs-material from 9.1.14 to 9.1.15 (#86) by dependabot[bot]</li> <li>Bump poetry from 1.5.0 to 1.5.1 (#85) by dependabot[bot]</li> <li>Bump requests from 2.30.0 to 2.31.0 (#82) by dependabot[bot]</li> <li>Bump poethepoet from 0.19.0 to 0.20.0 (#81) by dependabot[bot]</li> <li>Bump alembic from 1.10.4 to 1.11.1 (#78) by dependabot[bot]</li> <li>Bump pyjwt from 2.6.0 to 2.7.0 (#76) by dependabot[bot]</li> <li>Bump rich from 12.6.0 to 13.3.5 (#75) by dependabot[bot]</li> <li>Bump pylint from 2.17.3 to 2.17.4 (#74) by dependabot[bot]</li> <li>Bump pre-commit from 3.2.2 to 3.3.1 (#73) by dependabot[bot]</li> <li>and 4 more dependency updates</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v141-april-26-2023","title":"v1.4.1 (April 26, 2023)","text":"<p>New Features</p> <ul> <li>Add db methods to the CLI (#65) by seapagan</li> <li>Add Git pre commit hook (#64) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump pylint from 2.17.2 to 2.17.3 (#62) by dependabot[bot]</li> <li>Bump alembic from 1.10.3 to 1.10.4 (#61) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v140-april-20-2023","title":"v1.4.0 (April 20, 2023)","text":"<p>New Features</p> <ul> <li>Migrate to Typer for the CLI (#60) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump fastapi from 0.95.0 to 0.95.1 (#59) by dependabot[bot]</li> <li>Bump alembic from 1.10.2 to 1.10.3 (#58) by dependabot[bot]</li> <li>Bump pylint from 2.17.1 to 2.17.2 (#57) by dependabot[bot]</li> <li>Bump fastapi-mail from 1.2.6 to 1.2.7 (#56) by dependabot[bot]</li> <li>Bump black from 23.1.0 to 23.3.0 (#55) by dependabot[bot]</li> <li>Bump psycopg2 from 2.9.5 to 2.9.6 (#54) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v133-march-23-2023","title":"v1.3.3 (March 23, 2023)","text":"<p>Dependency Updates</p> <ul> <li>Bump fastapi from 0.92.0 to 0.95.0 (#53) by dependabot[bot]</li> <li>Bump uvicorn from 0.20.0 to 0.21.1 (#52) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.46 to 1.4.47 (#51) by dependabot[bot]</li> <li>Bump alembic from 1.9.3 to 1.10.2 (#49) by dependabot[bot]</li> <li>Bump fastapi-mail from 1.2.5 to 1.2.6 (#47) by dependabot[bot]</li> <li>Bump python-decouple from 3.7 to 3.8 (#46) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v132-february-16-2023","title":"v1.3.2 (February 16, 2023)","text":"<p>Closed Issues</p> <ul> <li>Improvements to the CLI metadata setup (#41) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump alembic from 1.9.2 to 1.9.3 (#43) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v131-january-25-2023","title":"v1.3.1 (January 25, 2023)","text":"<p>New Features</p> <ul> <li>Add improvements to the CLI metadata generation. (#42) by seapagan</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v130-january-25-2023","title":"v1.3.0 (January 25, 2023)","text":"<p>Closed Issues</p> <ul> <li>Error when creating user from CLI (#39) by seapagan</li> </ul> <p>Merged Pull Requests</p> <ul> <li>Fix Bug when creating user from CLI (#40) by seapagan</li> <li>Verify registration by Email (#28) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump aiosmtpd from 1.4.3 to 1.4.4.post2 (#38) by dependabot[bot]</li> <li>Bump email-validator from 1.3.0 to 1.3.1 (#37) by dependabot[bot]</li> <li>Bump alembic from 1.9.1 to 1.9.2 (#36) by dependabot[bot]</li> <li>Bump python-decouple from 3.6 to 3.7 (#35) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.45 to 1.4.46 (#34) by dependabot[bot]</li> <li>Bump alembic from 1.9.0 to 1.9.1 (#33) by dependabot[bot]</li> <li>Bump alembic from 1.8.1 to 1.9.0 (#32) by dependabot[bot]</li> <li>Bump databases from 0.6.1 to 0.7.0 (#31) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.44 to 1.4.45 (#30) by dependabot[bot]</li> <li>Bump certifi from 2022.9.24 to 2022.12.7 (#29) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v120-december-01-2022","title":"v1.2.0 (December 01, 2022)","text":"<p>Merged Pull Requests</p> <ul> <li>Implement Refresh Token functionality (#27) by seapagan</li> </ul> <p>New Features</p> <ul> <li>Send Emails on certain actions (#21) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump fastapi from 0.87.0 to 0.88.0 (#25) by dependabot[bot]</li> <li>Bump fastapi from 0.86.0 to 0.87.0 (#24) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.43 to 1.4.44 (#23) by dependabot[bot]</li> <li>Bump actions/dependency-review-action from 2 to 3 (#22) by dependabot[bot]</li> <li>Bump fastapi from 0.85.1 to 0.86.0 (#20) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.42 to 1.4.43 (#19) by dependabot[bot]</li> <li>Bump asyncpg from 0.26.0 to 0.27.0 (#17) by dependabot[bot]</li> <li>Bump psycopg2 from 2.9.4 to 2.9.5 (#16) by dependabot[bot]</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v111-october-30-2022","title":"v1.1.1 (October 30, 2022)","text":"<p>Merged Pull Requests</p> <ul> <li>Move database code into a module (#15) by seapagan</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v110-october-30-2022","title":"v1.1.0 (October 30, 2022)","text":"<p>Merged Pull Requests</p> <ul> <li>Run a development Server (#14) by seapagan</li> <li>Set CORS origin or default to open (#12) by seapagan</li> </ul> <p>New Features</p> <ul> <li>Customize the API metadata from the command line (#13) by seapagan</li> </ul> <p><code>Full Changelog</code> | <code>Diff</code> | <code>Patch</code></p>"},{"location":"changelog/#v100-october-26-2022","title":"v1.0.0 (October 26, 2022)","text":"<p>Merged Pull Requests</p> <ul> <li>Validate email (#11) by seapagan</li> <li>Implement cli to add  a new user (#10) by seapagan</li> <li>Document the App. (#5) by seapagan</li> <li>Handle bad DB settings more gracefully (#4) by seapagan</li> <li>Allow user to read their own profile data (#3) by seapagan</li> <li>Admins can Ban a user (#2) by seapagan</li> <li>Settings module (#1) by seapagan</li> </ul> <p>Dependency Updates</p> <ul> <li>Bump uvicorn from 0.18.3 to 0.19.0 (#9) by dependabot[bot]</li> <li>Bump pyjwt from 2.5.0 to 2.6.0 (#8) by dependabot[bot]</li> <li>Bump sqlalchemy from 1.4.41 to 1.4.42 (#7) by dependabot[bot]</li> <li>Bump fastapi from 0.85.0 to 0.85.1 (#6) by dependabot[bot]</li> </ul> <p>This changelog was generated using github-changelog-md by Seapagan</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contributing-to-the-fastapi-template","title":"Contributing to the FastAPI Template","text":"<p>Thank you for your interest in contributing to <code>fastapi-template</code>! We welcome all contributions, big or small.</p> <p>If you are not sure where to start, please take a look at the open issues. If you have an idea for a new feature or would like to report a bug, please open a new issue. You can also check the TODO List for ideas.</p> <p>I also welcome contributions to the documentation. If you find any errors or would like to suggest improvements, please open a new issue or submit a Pull Request.</p> <p>I you would like to contribute to the code, but find the requirements below a bit daunting, please feel free to open a discussion and I can help you get started, or even pair on a PR.</p> <p>Currently, development is done primary on Linux, but I will also try to test on Windows and Mac OS X when possible. If you are using a different platform and find any issues, please let me know. I welcome any contributions, on any platform!</p> <p>If you have any issues developing on a particular platform, please let me know and I will try to help you out. I am also open to suggestions for improving the development process and documentation.</p>"},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<p>Since this is a Python project, you will need to have Python installed on your machine. You can download the latest version of Python from the official website or using your Operating system's package manager. This project requires Python 3.9 or higher.</p> <p>I'd recommend using pyenv to manage your Python installations, the pyenv-installer works for Linux and Mac OS X. For Windows, you can use the pyenv-win port. See here for installation instructions.</p> <p>We also use Poetry to manage our dependencies. You should have this installed as well. You can install Poetry by following the instructions on the Poetry website.</p> <p>Tip</p> <p>If you don't want to have Poetry installed globally for any reason, there is an auto-generated <code>requirements-dev.txt</code> file in the root of the project. You can use this to install the dependencies using <code>pip</code>:</p> <pre><code>$ pip install -r requirements-dev.txt\n</code></pre> <p>With this, <code>Poetry</code> is also installed as a dependency for <code>poe</code> anyway so you may as well use it ! It's a great tool and I highly recommend it. Also, it is an integral part of this project development.</p>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<p>Before you start contributing, please make sure you have read and understood our Code of Conduct and License.</p> <p>To get started, follow these steps:</p> <ol> <li>Fork the repository and clone it to your local machine.</li> <li>Install the required dependencies (see next section).</li> <li>Create a new branch for your changes: <code>git checkout -b my-new-feature</code>.</li> <li>Make your changes and commit them: <code>git commit -am 'Add some feature'</code>.</li> <li>Push your changes to your fork: <code>git push origin my-new-feature</code>.</li> <li>Create a new pull request.</li> </ol>"},{"location":"contributing/#install-dependencies","title":"Install Dependencies","text":"<p>Run the following command to install the required dependencies:</p> <pre><code>$ poetry install\n</code></pre> <p>You then need to activate the virtual environment:</p> <pre><code>$ poetry shell\n</code></pre> <p>From here you can start working on the project. If you are using an IDE such as VSCode or PyCharm, you can set the use their Python interpreter setting to use the virtual environment that has just been created.</p>"},{"location":"contributing/#linting","title":"Linting","text":"<p>I am quite strict about linting and code formatting and have set up a number of pre-commit hooks and tasks to ensure that the code meets the required standards.</p>"},{"location":"contributing/#install-git-pre-commit-hooks","title":"Install Git Pre-Commit hooks","text":"<p>Please install this if you are intending to submit a PR. It will check commits locally before they are pushed up to the Repo. The GitHub CI runs the linting checks (and in future probably MyPy as well), and will fail if there are any errors.</p> <pre><code>$ pre-commit install\npre-commit installed at .git/hooks/pre-commit\n</code></pre> <p>This will ensure that all code meets the required linting standard before being committed.</p>"},{"location":"contributing/#run-pre-commit-manually","title":"Run pre-commit manually","text":"<p>You can run these checks manually on all staged files using the below command :</p> <pre><code>poe pre\n</code></pre>"},{"location":"contributing/#testing","title":"Testing","text":"<p>We are using pytest for testing.</p> <p>If you add any new features, please add tests for them. This will help us to ensure that the code is working as expected and will prevent any regressions.</p> <p>GitHub Actions will run the tests on every commit and PR, failing tests will block the PR from being merged.</p> <p>There is a task set up to run tests:</p> <pre><code>$ poe test\n</code></pre> <p>You can also run the tests manually using the following command:</p> <pre><code>$ pytest\n</code></pre> <p>The task is set up so we can automatically add other options in the future.</p>"},{"location":"contributing/#changelog","title":"Changelog","text":"<p>The changelog is automatically generated, using this project, so please do not edit it manually.</p> <p>For maintainers, there is a POE task that will run this and update the changelog file.</p> <pre><code>$ poe changelog\n</code></pre> <p>You would also need to add a GitHub Personal Access Token to a local config file as usual. See the section in the Documentation for information.</p> <p>However, you should NOT include a change to the <code>CHANGELOG.md</code> file in any Pull Requests. This will be handled by the maintainers when a new release is made. Your GitHub username will be added to the changelog automatically beside your PR.</p>"},{"location":"contributing/#convenience-tasks","title":"Convenience Tasks","text":"<p>There are a few other convenience tasks that can be run using the <code>poe</code> command. These are defined in the <code>pyproject.toml</code> file.</p> <p>Each of these tasks can have extra options added which will be passed to the underlying tool.</p> <p>Run <code>mypy</code> on the code base in strict mode:</p> <pre><code>$ poe mypy\n</code></pre> <p>Format the code using <code>ruff format</code>:</p> <pre><code>$ poe format\n</code></pre> <p>Lint the code using <code>ruff</code>:</p> <pre><code>$ poe ruff\n</code></pre> <p>Check the Markdown:</p> <pre><code>$ poe markdown\n</code></pre> <p>Run <code>ruff</code>, <code>mypy</code>, <code>format</code> and <code>markdown</code> at the same time:</p> <pre><code>$ poe lint\n</code></pre>"},{"location":"contributing/#documentation-tasks","title":"Documentation Tasks","text":"<p>These are to help with developing and updating the documentation.</p> <ul> <li><code>poe docs:serve</code> - Serve the MkDocs locally for testing and development</li> <li><code>poe docs:serve:all</code> - Same as above, but opens to all interfaces so you can   view it on other devices on your network</li> <li><code>poe docs:build</code> - Build the MkDocs site into the <code>dist</code> folder</li> <li><code>poe docs:publish</code> - Publish the docs to your GitHub pages. Note that only   those with write-access to this repo can do this.</li> </ul>"},{"location":"contributing/#guidelines","title":"Guidelines","text":"<p>Here are some guidelines to follow when contributing to <code>fastapi-template</code>:</p> <ul> <li>Follow the PEP 8 style guide. The   pre-commit hooks will check for this. We are using the Ruff   Formatter.</li> <li>Fix any linting errors or warnings. The pre-commit hooks will check for   this also. Ruff is installed and set to pretty   strict settings. Ruff now replaces all the original linters that were   installed. There is also a Markdown linter.</li> <li>MyPy is installed and we are using   type hints. Please try to add type hints to your code. If you see any areas of   the code that are missing type hints, please feel free to open a PR and add   them \ud83d\ude01!</li> <li>Write clear and concise commit messages.</li> <li>Write tests for your code.</li> <li>Make sure your code passes all existing and new tests before submitting a pull   request.</li> <li>Document your code using   docstrings. This project uses the   Google Docstring   Spec though   at this time is a bit slack on listing the Args and Returns. I will be adding   these in as I go along so feel free to add them in if you are contributing   .</li> <li>If you add or change any functionality, please update the documentation   accordingly.</li> <li>Use GitHub issues to   report bugs or suggest new features.</li> </ul> <p>If you are using VSCode, there is a config file in the <code>.vscode</code> folder that will help you to follow these guidelines. You may need to install some extensions to get the most out of it. I'll add a list of recommended extensions here soon. The <code>Python</code> and <code>Ruff</code> ones are very helpful (the included <code>.vscode</code> folder helps configure these).</p>"},{"location":"contributing/#contact","title":"Contact","text":"<p>If you have any questions or need help with contributing, please contact me @seapagan on GitHub. You can also use the GitHub Discussions feature.</p> <p>Happy contributing!</p>"},{"location":"future/","title":"Future Plans","text":""},{"location":"future/#todo-list","title":"TODO List","text":""},{"location":"future/#general","title":"General","text":"<ul> <li>Add an option to deactivate the root route <code>/</code> so it can be handled by a   frontend instead. This also removes the index boilerplate.</li> <li>add time-limited bans (configurable)</li> <li>Add certain users that will not time-expire (or much longer time) for eg for   owner or premium access.</li> <li>Replace the <code>toml</code>/<code>toml_w</code> libraries with <code>rtoml</code> for better functionality.   This is a Rust-based library that is very fast and very complete. It is also   written by the same author as <code>pydantic</code> so should be a good fit.</li> <li>Add a <code>logout</code> route to immediately invalidate the users token and refresh   token. This will need a database to be kept of invalidated tokens (which can   periodically be auto-purged of tokens that would be time-expired anyway.)</li> <li>Allow to resend a registration email (part of the code is already there for   this, but was not functioning properly so disabled).</li> <li>Send an email to the User when they change their password or update their   profile, are Banned/Unbanned and to Admins when important events happen.</li> <li>Update current and future email templates with actual content, and change   their markup to latest best practices.</li> <li>Add an option to the command line to bump the version number in API docs and   the TOML file (can be done using the <code>poetry version</code> command already,   document this).</li> <li>add verified status to user list for admins only.</li> <li>implement rate-limiting - auto block abusers - would help if <code>quotas</code>   implemented first (see below).</li> <li>users should be able to get others (limited) profile data in some cases -   public data should be ok (eg in a front-end profile page). Think about how   this should be implemented. This may just need to be in derived projects   though, not this template.</li> <li>add Metrics and Observability (eg Prometheus, Grafana, Sentry, etc)</li> <li>add pagination to the user list endpoint</li> </ul>"},{"location":"future/#auth","title":"Auth","text":"<ul> <li>add a password recovery endpoint</li> <li>Implement user groups and permissions, make it configurable.</li> <li>Allow social login (eg Google, Facebook, Twitter, etc), check out   fastsapi-sso for this.</li> </ul>"},{"location":"future/#testing","title":"Testing","text":"<ul> <li>Speed up tests generally</li> <li>allow choice of Postgresql or SQLite for testing (currently only Postgresql)</li> <li>Fix tests under Docker - currently fail d/t test database not existing</li> </ul>"},{"location":"future/#cli","title":"CLI","text":"<ul> <li>option to remove the customization functionality from the CLI. Useful once you   have customized the template and don't want to give the end-user the ability to   change it easily.</li> <li>ctrl-c on the <code>custom metadata</code> command should not bring up a Rich   stack-trace, but exit cleanly.</li> <li>add an option to make user an admin (or take it away)</li> </ul>"},{"location":"future/#documentation","title":"Documentation","text":"<ul> <li>Add proper documentation with examples showing how to use the User &amp; Auth   system in custom code, link to example projects and perhaps create a YouTube   video showing an example custom project based on this template?</li> <li>add commands to CLI to serve, build, publish to gh-pages etc</li> <li>Add info how to create a temporary database for testing (eg using Docker)</li> </ul>"},{"location":"future/#quotas","title":"Quotas","text":"<p>Add Quota functionality.</p> <ul> <li>limit number of API calls per user per day/hour</li> <li>different user groups have different quotas (configurable)</li> <li>allow endpoint with no Quota</li> <li>option to block altogether or seriously slow users access to the API for a   period of time</li> </ul>"},{"location":"future/#caching","title":"Caching","text":"<ul> <li>add a Redis cache to the endpoints.   fastapi-redis-cache should   make this reasonably painless.</li> </ul>"},{"location":"future/#frontend","title":"Frontend","text":"<p>Add integration for a proper Frontend (ie React, Vue, etc) by having a config value to point the the location of this instead of using the default <code>templates/index.html</code>. Look at how to integrate API configuration values with this front end.</p>"},{"location":"how-to-guides/","title":"Guides and How-to's","text":"<p>How-to Guides</p> <p>To be Written</p>"},{"location":"important/","title":"Breaking Changes from 0.4.x","text":"<p>From version 0.5.0, there have been some major breaking changes to the API.</p> <p>0.4.x Branch</p> <p>If you prefer to continue using the 0.4.x branch, you can find it here.</p> <p>To use this branch you will need to clone the repository and checkout the <code>0.4.2</code> branch.</p> <pre><code>git clone -b 0.4.2 https://github.com/seapagan/fastapi-template.git\n</code></pre> <p>Be aware that this branch will not be maintained and will not receive any updates or bug fixes.</p>"},{"location":"important/#migrated-to-async-sqlalchemy-20-for-database-access","title":"Migrated to Async SQLAlchemy 2.0 for database access","text":"<p>Previously, we used encode/databases for the database access. Now we have switched to SQLAlchemy 2.0. This means that you will need to update your database access code to use the new API for any new routes or models. Look at how the <code>User</code> model has been updated for an example.</p> <p>See also the SQLAlchemy Async ORM documentation for more information</p>"},{"location":"important/#the-cli-is-an-installable-package","title":"The CLI is an installable package","text":"<p>This means that the <code>api-admin</code> command is now a package and installed in your local virtual environment when you run <code>poetry install</code>. With this you can run the <code>api-admin</code> command from the command line anywhere inside the virtual environment.</p> <pre><code>api-admin --help\n</code></pre> <p>Pip users</p> <p>If you are not using Poetry, but the requirements.txt file, you will need to run the <code>api-admin</code> command as a Python module. For example, <code>python -m api-admin</code>.</p>"},{"location":"important/#full-test-coverage","title":"Full Test coverage","text":"<p>The API now has full test coverage (using Pytest). This means that testing will be enforced on all PR's and that the test suite will be run by GitHub Actions on every commit and PR. This is to ensure that the API is stable and reliable.</p>"},{"location":"important/#linting-changes","title":"Linting Changes","text":"<p>The project has moved completely over to using Ruff for Linting and Formatting.</p> <p>This relaces <code>Flake8</code>, <code>Black</code>, <code>isort</code> and many other tools with a single tool. I have set the rules quite strict also! All exisiting code passes these checks, or is whitelisted for a very good reason. This will be enforced for all PR's also. All tools are configured in the <code>pyproject.toml</code> file.</p>"},{"location":"important/#type-hints","title":"Type Hints","text":"<p>All code now has full type hinting. This means that you can use the <code>mypy</code> tool to check for type errors in the code. This will be enforced for all PR's.</p>"},{"location":"important/#dependency-updates","title":"Dependency Updates","text":"<p>All dependencies used are updated to the latest versions as of the <code>0.5.0</code> release and will be kept up to date using the GitHub Dependabot tool.</p> <p>Did you Read all this?</p> <p>Since these are quite major changes, the API will not run unless you have read these instructions and noted this by adding the following environment variable to your <code>.env</code> file:</p> <pre><code>I_READ_THE_DAMN_DOCS=True\n</code></pre>"},{"location":"known-issues/","title":"Known Issues","text":""},{"location":"known-issues/#bugs","title":"Bugs","text":"<p>Below is a (non-exhaustive) list of known bugs in the application. Check the Issues also. If you find a bug, please report it.</p> <ul> <li>If a user is deleted while logged in, the API returns a 500 (Internal Server    Error).</li> <li>Tests dont work under Docker since we don't have a 'test' database configured.</li> </ul>"},{"location":"license/","title":"License","text":"<p>MIT License</p> <p>Copyright (c) 2022 - 2023 Grant Ramsay</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"project-organization/","title":"Project Organization","text":"<p>This project has been deliberately laid out in a specific way. To avoid long complicated files which are difficult to debug, functionality is separated out in files and modules depending on the specific functionality.</p> <p>main.py - The main controlling file, this should be as clean and short as possible with all functionality moved out to modules.</p> <p>database/ - This module controls database setup and configuration, and should generally not need to be touched.</p> <p>config/ - Handles the API settings and defaults, also the Metadata customization. If you add more settings (for example in the <code>.env</code> file) you should also add them to the <code>config/settings.py</code> or <code>config/metadata.py</code> with suitable defaults. Non-secret (or depoloyment independent) settings should go in the <code>metadata</code> file, while secrets (or deployment specific) should go in the <code>settings</code> and <code>.env</code> files</p> <p>commands/ - This directory can hold any CLI commands you need to write, for example populating a database, create a superuser or other housekeeping tasks.</p> <p>managers/ - This directory contains individual files for each 'group' of functionality. They contain a Class that should take care of the actual work needed for the routes. Check out the <code>managers/auth.py</code> and <code>managers/user.py</code></p> <p>migrations/ - We use Alembic to handle the database migrations. Check out their pages for more info. See instructions under Development for more info.</p> <p>models/ - Any database models used should be defined here along with supporting files (eq the <code>models/enums.py</code>) used here. Models are specified using the SQLAlchemy format, see <code>models/user.py</code> for an example.</p> <p>resources/ - Contains the actual Route resources used by your API. Basically, each grouped set of routes should have its own file, which then should be imported into the <code>resources/routes.py</code> file. That file is automatically imported into the main application, so there are no more changes needed. Check out the routes in <code>resources/user.py</code> for a good example. Note that the routes contain minimal actual logic, instead they call the required functionality from the Manager (UserManager in <code>managers/user.py</code> in this case).</p> <p>schemas/ - Contains all <code>request</code> and <code>response</code> schemas used in the application, as usual with a separate file for each group. The Schemas are defined as Pydantic Classes.</p> <p>static/ - Any static files used by HTML templates for example CSS or JS files.</p> <p>templates/ - Any HTML templates. We have one by default - used only when the root of the API is accessed using a Web Browser (otherwise a simple informational JSON response is returned). You can edit the template in <code>templates/index.html</code> for your own API.</p>"},{"location":"tutorials/","title":"Tutorials","text":"<p>Tutorials</p> <p>To be Written</p>"},{"location":"customization/meta/","title":"Metadata","text":""},{"location":"customization/meta/#customize-the-metadata","title":"Customize the Metadata","text":"<p>By default the Template Title, Description, Author and similar is set to my details. Changing this is very easy though, and there are 2 ways you can do.</p>"},{"location":"customization/meta/#manually","title":"Manually","text":"<p>Metadata is stored in the <code>app/config/metadata.py</code> file and this can be edited by hand if desired:</p> <pre><code>from config.helpers import MetadataBase\n\ncustom_metadata = MetadataBase(\n    title=\"API Template\",\n    description=\"Run 'api-admin custom metadata' to change this information.\",\n    repository=\"https://github.com/seapagan/fastapi-template\",\n    license_info={\n        \"name\": \"MIT\",\n        \"url\": \"https://opensource.org/licenses/MIT\",\n    },\n    contact={\n        \"name\": \"Grant Ramsay (seapagan)\",\n        \"url\": \"https://www.gnramsay.com\",\n    },\n    email=\"seapagan@gmail.com\",\n    year=\"2023\"\n)\n</code></pre> <p>You can change the values in this dictionary as needed. You should also change the name, description and authors in the <code>pyproject.toml</code> file.</p> <p>For the License URL, you can find a list in the <code>config/helpers.py</code></p>"},{"location":"customization/meta/#using-the-provided-configuration-tool","title":"Using the provided configuration tool","text":"<p>The <code>api-admin</code> command can also do this for you, asking for the values at the command line and automatically updating both files:</p> <pre><code>$ api-admin custom metadata\n\nAPI-Template : Customize application Metadata\n\nEnter your API title [API Template]:\nEnter the description [Run 'api-admin custom metadata' to change this information.]:\nVersion Number (use * to reset to '0.0.1') [1.3.1]:\nURL to your Repository [https://github.com/seapagan/fastapi-template]:\n\nChoose a license from the following options:\nApache2, BSD3, BSD2, GPL, LGPL, MIT, MPL2, CDDL, EPL\nYour Choice of License? [MIT]:\n\nAuthor name or handle [Grant Ramsay (seapagan)]:\nContact Email address [seapagan@gmail.com]:\nAuthor Website [https://www.gnramsay.com]:\n\nYou have entered the following data:\nTitle       : API Template\nDescription : Run 'api-admin custom metadata' to change this information.\nVersion     : 1.3.1\nRepository  : https://github.com/seapagan/fastapi-template\nLicense     : MIT\nAuthor      : Grant Ramsay (seapagan)\nEmail       : seapagan@gmail.com\nWebsite     : https://www.gnramsay.com\n(C) Year    : 2023\n\nIs this Correct? [Y/n]: y\n\n-&gt; Writing out Metadata .... Done!\n</code></pre> <p>This will also put in the correct License URL link automatically.</p>"},{"location":"customization/templates/","title":"Customize the Templates","text":"<p>There are several HTML templates used at this time, all are stored in the <code>templates/</code> folder or a subfolder of this.</p> <ul> <li><code>app/templates/index.html</code> - This template is shown when the root of the API is visited using a web browser instead of an API call. Use it to display vasic details about your API and usage instructions, point to the documentation etc. The default output is below for an example:</li> </ul> <p></p> <ul> <li><code>app/templates/email</code> - this folder contains HTML Email templates, currently only basic placeholders.</li> <li><code>welcome.html</code>. This is sent to a new User when they sign up</li> </ul>"},{"location":"deployment/deployment/","title":"Deployment","text":""},{"location":"deployment/deployment/#deploying-to-production","title":"Deploying to Production","text":"<p>There are quite a few ways to deploy a FastAPI app to production. There is a very good discussion about this on the FastAPI Deployment Guide which covers using Uvicorn, Gunicorn and Containers.</p> <p>Remember</p> <p>Whichever method you choose, you still need to set up a virtual environment, install all the dependencies, setup your <code>.env</code> file (or use Environment variables if your hosting provider uses these - for example Vercel or Heroku) and set up and migrate your Database, exactly the same as for Development as desctribed previously.</p>"},{"location":"deployment/deployment/#nginx","title":"Nginx","text":"<p>My Personal preference is to serve with Gunicorn, using uvicorn workers behind an Nginx proxy, though this does require you having your own server. There is a pretty decent tutorial on this at Vultr.</p>"},{"location":"deployment/deployment/#aws-lambda","title":"AWS Lambda","text":"<p>For deploying to AWS Lambda with API Gateway, there is a really excellent Medium post (and it's followup) Here</p>"},{"location":"deployment/deployment/#aws-elastic-beanstalk","title":"AWS Elastic Beanstalk","text":"<p>For AWS Elastic Beanstalk there is a very comprehensive tutorial at testdriven.io</p>"},{"location":"deployment/deployment/#docker-container","title":"Docker Container","text":"<p>Deploy a Docker container or Kubernetes cluster. There are many services which allow this including AWS, Google Cloud and more. See Develop with Docker in this documentation for how to containerize this project, and the Offical FastAPI docs section for more information.</p>"},{"location":"development/docker/","title":"Run a server using Docker","text":""},{"location":"development/docker/#run-a-server","title":"Run a Server","text":"<p>Docker containers can be used for testing the API during development just make sure that Docker is installed and you can use the built-in docker compose file:</p> <pre><code>docker compose up\n</code></pre> <p>This will by default run the server on http://localhost:8000, and reload after any change to the source code.</p> <p>If you need more control, you can run <code>uvicorn</code> directly :</p> <pre><code>docker compose run --rm --service-ports api uvicorn --host 0.0.0.0 app.main:app --reload\n</code></pre> <p>The above command starts the server running on http://localhost:8000, and it will automatically reload when it detects any changes as you develop.</p> <p>Note: Neither of these are suitable to host a project in production, see the Deployment section for information.</p>"},{"location":"development/docker/#updating-dependencies","title":"Updating Dependencies","text":"<p>Every time a new dependency is installed a new image must be built:</p> <pre><code>docker compose build\n</code></pre>"},{"location":"development/docker/#database-administration","title":"Database Administration","text":"<p>At this time, the CLI tool is not available in the Docker container, so you will need to use an external tool such as <code>pgAdmin4</code> to manage the database. Note that the database is exposed on port <code>5433</code> and the default username and password are those set in your <code>.env</code> file.</p> <p>In the future I will try to get the <code>api-admin</code> tool working inside the Docker container. The issue is getting this to work without destroying my local <code>.venv</code> folder.</p>"},{"location":"development/docker/#run-tests","title":"Run Tests","text":"<p>Tests Broken in Docker</p> <p>The tests are currently broken (in Docker only) due to us now using Postgres for the tests database. This will be fixed in an upcoming release.</p> <p>This API contains Unit and Integration tests using 'Pytest'</p> <p>To run these from within the Docker container use the <code>pytest</code> command with <code>docker compose</code>:</p> <pre><code>$ docker compose run --rm api pytest\nTest session starts (platform: linux, Python 3.11.3, pytest 7.3.1, pytest-sugar 0.9.7)\nUsing --randomly-seed=2090593217\n\n...\n\n tests/integration/test_protected_user_routes.py \u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\n tests/integration/test_user_routes.py \u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\n\n...\n\n\n------------------------------------------------------------\nTOTAL                            518     10    98%\nCoverage HTML written to dir htmlcov\n\n\nResults (36.04s):\n     157 passed\n       4 skipped\n</code></pre> <p>if you wish to disable the coverage display temporarily use:</p> <pre><code>$ docker compose run --rm api pytest --no-cov\n</code></pre> <p>You can also run the Unit or Integration tests independently using <code>docker compose run --rm api pytest -m unit</code> or <code>docker compose run --rm api pytest -m integration</code>.</p> <p>See the Pytest how-tos for more information</p>"},{"location":"development/documentation/","title":"Documentation Website","text":""},{"location":"development/documentation/#development","title":"Development","text":"<p>The documentation for this project is created using MkDocs with the Material for MkDocs theme.</p> <p>For this template, the docs website is served using GitHub Pages, though since it is just HTML and CSS you can host it from any provider you choose.</p> <p>Source for this is stored in the <code>docs</code> folder off the root of the project, and consists of Markdown files. The main control file is <code>mkdocs.yml</code> in the root.</p> <p>To help with documentation development you can run a docs server on http://localhost:9000 using the below command :</p> <pre><code>$ poe docs:serve\nPoe =&gt; mkdocs serve -w TODO.md -w CHANGELOG.md -w CONTRIBUTING.md -w BUGS.md\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\nINFO    -  Documentation built in 1.72 seconds\nINFO    -  [11:09:51] Watching paths for changes: 'docs', 'mkdocs.yml', 'TODO.md', 'CHANGELOG.md', 'CONTRIBUTING.md', 'BUGS.md'\nINFO    -  [11:09:51] Serving on http://127.0.0.1:9000/\n</code></pre> <p>You could run the server directly using <code>mkdocs serve</code>, but the above command will also watch for changes to the <code>TODO.md</code>, <code>CHANGELOG.md</code>, <code>CONTRIBUTING.md</code> and <code>BUGS.md</code> files, and will automatically rebuild the site when they change.</p> <p>Note</p> <p>This command will not auto-generate the OpenAPI schema, so you will need to run the below command first if your schema has changed :</p> <pre><code>$ poe openapi\n</code></pre> <p>The site is still very much a work in progress, and any PR's to add information will be gratefully received. The planned general layout and format can be seen in the <code>mkdocs.yml</code> file.</p> <p>If you want the site to be opened to your local network (ie to test on a mobile or another local device), then you can use the below command :</p> <pre><code>$ poe docs:serve:all\n</code></pre> <p>This will run the <code>mkdocs serve</code> command, but will also open the site on your local network. You can then access the site on your other device using the IP address of your machine, and the port number shown in the output of the command.</p>"},{"location":"development/documentation/#regenerate-the-openapi-documentation","title":"Regenerate the OpenAPI Documentation","text":"<p>The OpenAPI schema is needed for the documentation, and can be generated from the existing routes. To do this, run the below command :</p> <pre><code>$ api-admin docs openapi --prefix=docs/reference\n</code></pre> <p>For ease of use this is also run automatically when the docs are built or published (but not when using the <code>mkdocs serve</code> command above).</p> <p>You can also run the above command easier using the <code>poe</code> command :</p> <pre><code>$ poe openapi\n</code></pre>"},{"location":"development/documentation/#build-the-documentation","title":"Build the Documentation","text":"<p>You can create a production-ready version of the site by using the <code>build</code> command:</p> <pre><code>$ poe docs:build\nINFO     -  Cleaning site directory\nINFO     -  Building documentation to directory: /home/seapagan/data/work/own/fastapi-template/site\nINFO     -  Documentation built in 0.95 seconds\n</code></pre> <p>This will create a static website in the <code>site</code> folder which you can then upload to the hosting provider of your choice. See the next section if you are using GitHub Pages.</p>"},{"location":"development/documentation/#publish-to-github-pages","title":"Publish to GitHub Pages","text":"<p>When you are happy with the docs, they can be published automatically to GitHub Pages using the below command :</p> <pre><code>$ poe docs:publish\n</code></pre> <p>This command will automatically build the docs, and then push the <code>site</code> folder to GitHub. It will also auto-generate the OpenAPI schema as part of the build.</p> <p>Note that only someone with WRITE access to the repository can do this.</p>"},{"location":"development/local/","title":"Local Development","text":""},{"location":"development/local/#run-a-server","title":"Run a Server","text":"<p>The uvicorn ASGI server is automatically installed when you install the project dependencies. This can be used for testing the API during development. There is a built-in command to run this easily :</p> <pre><code>$ api-admin serve\n</code></pre> <p>This will by default run the server on http://localhost:8000, and reload after any change to the source code. You can add options to change this</p> <pre><code>$ api-admin serve --help\n\nUsage: api-admin serve [OPTIONS]\n\n  Run a development server from the command line.\n\n  This will auto-refresh on any changes to the source in real-time.\n\nOptions:\n  --port   -p   INTEGER   Define the port to run the server on  [default: 8000]\n  --host   -h   TEXT      Define the interface to run the server on.  [default:\n                          localhost]\n  --reload --no-reload    Enable auto-reload on code changes [default: True]\n  --help                  Show this message and exit.\n</code></pre> <p>If you need more control, you can run <code>uvicorn</code> directly :</p> <pre><code>uvicorn app.main:app --reload\n</code></pre> <p>The above command starts the server running on http://localhost:8000, and it will automatically reload when it detects any changes as you develop.</p> <p>Note: Neither of these are suitable to host a project in production, see the Deployment section for information.</p>"},{"location":"development/local/#run-tests","title":"Run Tests","text":"<p>This API has Unit and Integration tests using 'Pytest'</p> <p>Database Setup</p> <p>The tests will run using Posgresql against the database specified in the <code>TEST_DATABASE_URL</code> environment variable. This should be a test database, and will be cleared before each test run. Do not use a production database for testing.</p> <p>You will also need to set up your environment file with the correct <code>DB_USER</code>, <code>DB_PASSWORD</code>, <code>DB_ADDRESS</code>, <code>DB_PORT</code> and <code>DB_NAME</code> values.</p> <p>Tests run on GitHub Actions will ignore these settings and use their own hosted Postregsql test database.</p> <p>To run these from within the virtual environment use the <code>pytest</code> command:</p> <pre><code>$ pytest\nTest session starts (platform: linux, Python 3.11.3, pytest 7.3.1, pytest-sugar 0.9.7)\nUsing --randomly-seed=2090593217\n\n...\n\n tests/integration/test_protected_user_routes.py \u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\n tests/integration/test_user_routes.py \u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\u2713\n\n...\n\n\n------------------------------------------------------------\nTOTAL                            518     10    98%\nCoverage HTML written to dir htmlcov\n\n\nResults (36.04s):\n     161 passed\n</code></pre> <p>if you wish to disable the coverage display temporarily use :</p> <pre><code>$ pytest --no-cov\n</code></pre> <p>You can also run the Unit or Integration tests independently using <code>pytest -m unit</code> or <code>pytest -m integration</code>.</p> <p>See the Pytest how-tos for more information</p>"},{"location":"reference/api/","title":"API Reference","text":"<p>API Reference</p> <p>To be Written</p>"},{"location":"reference/swagger/","title":"Interactive API Docs","text":"<p>The interative API below is auto-generated from the OpenAPI specification for this API.</p> <p>Note</p> <p>There is not a real API or Database backing this, so the 'Try It Out' option is disabled. You can access a working version of this by installing the template and running the FastAPI server, then visiting the <code>/docs</code> path.</p> <p>"},{"location":"usage/add-user/","title":"Add a user to the database","text":"<p>It is possible to add Users to the database using the API itself, but you cannot create an Admin user this way, unless you already have an existing Admin user in the database.</p> <p>This template includes a command-line utility to create a new user and optionally make them Admin at the same time:</p>"},{"location":"usage/add-user/#interactively","title":"Interactively","text":"<pre><code>$ api-admin user create\n</code></pre> <p>You will be asked for the new user's email etc, and if this should be an Admin user (default is to be a standard non-admin User). These values can be added from the command line too, for automated use. See the built in help for details :</p> <pre><code>$ ./api-admin user create --help\n API Template configuration tool 1.5.0\n\n Usage: api-admin user create [OPTIONS]\n\n Create a new user. This can optionally be an admin user.\n Values are either taken from the command line options, or interactively for\n any that are missing.\n\n  Options\n  *  --email       -e      TEXT  The user's email address [required]\n  *  --first_name  -f      TEXT  The user's first name [required]\n  *  --last_name   -l      TEXT  The user's last name [required]\n  *  --password    -p      TEXT  The user's password [required]\n     --admin       -a            Make this user an Admin\n     --help                      Show this message and exit.\n</code></pre> <p>Note that any user added manually this way will automatically be verified (no need for the confirmation email which will not be sent anyway.)</p>"},{"location":"usage/add-user/#through-command-line-parameters","title":"Through Command-line parameters","text":"<p>You can also specify the required User parameters on the command-line. Any options that are missing will be prompted for (except for Admin, this must be physically specified if wanted) :</p> <pre><code>$ api-admin user create --email testuser@mailserver.com -f Test -l User -p s3cr3tpassw0rd\n</code></pre> <p>In the above case a normal user will be created. You can mix long-form parameters (<code>--first_name</code>) and short-form (<code>-f</code>) in the same command.</p> <p>This would be useful for automation scripts for example.</p>"},{"location":"usage/installation/","title":"How to install this project","text":"<p>Contribute!</p> <p>If you make changes to the existing code, why not create a feature-branch and a Pull-Request to have it included into the Template? \ud83d\ude0a</p> <p>See Contributing for more info.</p>"},{"location":"usage/installation/#as-a-github-template","title":"As a GitHub template","text":"<p>Click the 'Use this template' button at the top of the Repository on GitHub. This will create a new repository in your personal GitHub account (Not a Fork) which you can then Clone and start working on.</p> <p>It is assumed that you have at least some knowledge of FastAPI to use this template, there are very good Basic and Advanced User Guides on the FastAPI website .</p>"},{"location":"usage/installation/#as-a-fork","title":"As a Fork","text":"<p>You can also fork this project as usual, which allows you to easily bring it up to date with changes and improvements as they happen. This does have the posibility of conflicts. As long as you stick to adding new models and routes but not modifying the existing base code it should be ok.</p>"},{"location":"usage/installation/#upgrading-from-a-patch-file","title":"Upgrading from a Patch file","text":"<p>Sometime in the next few releases I will include patch files with the release to upgrade from the previous release. These can be applied by Git and will upgrade the Template code to the latest. The same warning applies as above - your changes can cause merge conflicts.</p> <p>If you were a few releases behind, you can apply the patches in ascending version order to get to the latest.</p>"},{"location":"usage/user-control/","title":"User Control","text":"<p>It is possible to control most of the User functionality through the API as an Admin User, however it's often useful to also do it quickly from the command-line.</p> <p>Watch Out!!</p> <p>These commands don't require an Admin API User to use!</p> <p>Make sure you have a good strong password (or even better use SSH Keys) if your server can be accessed from public networks.</p>"},{"location":"usage/user-control/#add-a-user","title":"Add a User","text":"<p>This is described in the previous page. It is important to note that any user added this was will be automatically verified.</p>"},{"location":"usage/user-control/#list-all-users","title":"List All Users","text":"<p>You can list all registered users in a nice table as shown below:</p> <pre><code>$ api-admin user list\n</code></pre> <p>This will show Id, Email address, First and Last name, Role, and the Verified and Banned Status.</p> <p>Warning</p> <p>This list could be rather large and be produced slowly if you have a very popular site!</p> <p>In future versions I'll add an auto-paging facilty if the numbers are large.</p>"},{"location":"usage/user-control/#list-a-specific-user","title":"List a specific User","text":"<pre><code>$ api-admin user show 23\n</code></pre> <p>This will show the same data as above, but for only one user. You must specify the user ID.</p>"},{"location":"usage/user-control/#verify-a-specific-user","title":"Verify a specific User","text":"<p>You can verify a user as being valid from the CLI. This allows them to login without needing to use the validation email. Useful for testing or adding Users you know exist.</p> <pre><code>$ api-admin user verify 23\n</code></pre>"},{"location":"usage/user-control/#search-for-a-user","title":"Search for a user","text":"<ul> <li>This functionality is #Currently not implemented*</li> </ul>"},{"location":"usage/user-control/#ban-or-unban-a-specific-user","title":"Ban or Unban a specific User","text":"<p>Ban a User so they cannot access the API. You can also <code>unban</code> any user by adding the <code>-u</code> or <code>--unban</code> flag.</p> <pre><code>$ api-admin user ban 23\n</code></pre> <p>or to unban:</p> <pre><code>$ api-admin user ban 23 -u\n</code></pre>"},{"location":"usage/user-control/#delete-a-specific-user","title":"Delete a specific User","text":"<p>To remove a specific user from the API:</p> <pre><code>$ api-admin user delete 23\n</code></pre> <p>They will no longer be able to access the API, this CANNOT BE UNDONE. It's probably better to BAN a user unless you are very sure.</p>"},{"location":"usage/configuration/database/","title":"Setup the application database","text":""},{"location":"usage/configuration/database/#migrate-the-database","title":"Migrate the Database","text":"<p>Make sure you have configured the database. Then run the following command to set it up, applying all the required migrations:</p> <pre><code>$ api-admin db init\n</code></pre> <p>(this is the same as running <code>alembic upgrade head</code>, though it will downgrade to the base structure and delete all data as well)</p>"},{"location":"usage/configuration/database/#update-the-database-structure","title":"Update the Database structure","text":"<p>Everytime you add or edit a model, create a new migration as shown below. You will be asked for a commit message. This will create and apply the migration in the same step:</p> <pre><code>$ api-admin db revision\nEnter the commit message for the revision: Added email to the users model\n\n  Generating ..._added_email_to_the_users_model.py ...  done\n</code></pre> <p>This is the same as running the below commands, it is provided for ease of use:</p> <pre><code>alembic revision --autogenerate -m \"Commit message\"\nalembic upgrade head\n</code></pre> <p>Check out the Alembic repository for more information on how to use (for example how to revert migrations).</p>"},{"location":"usage/configuration/database/#clear-or-initialise-the-database","title":"Clear or Initialise the database","text":"<p>If you wish clear or reset the database you can do this with <code>./api-admin db drop</code>. This will drop all tables and reset the database, destroying all data. Note that you will need to either run <code>./api-admin db upgrade</code> or <code>api-admin db init</code> again before the database is usable.</p>"},{"location":"usage/configuration/database/#cli-options-for-the-database","title":"CLI options for the Database","text":"<p>Look at the built-in help for more details :</p> <pre><code>$ api-admin db --help\nUsage: api-admin db [OPTIONS] COMMAND [ARGS]...\n\n Control the Database.\n\nOptions:\n  --help          Show this message and exit.\n\nCommands:\n  drop            Drop all tables and reset the Database\n  init            Re-Initialise the database using Alembic.\n  revision        Create a new revision.\n  upgrade         Apply the latest Database Migrations.\n</code></pre>"},{"location":"usage/configuration/environment/","title":"Environment Variables","text":""},{"location":"usage/configuration/environment/#set-up-the-env-file","title":"Set up the <code>.env</code> file","text":"<p>Database (and other) settings can be read from environment variables or from a <code>.env</code> file in the project root. By default, these are only used for the Database setup and JWT Secret Key. See the <code>.env.example</code> file for how to use.</p> <p>Info</p> <p>The Database and User must already exist in your Postgres database!</p> <p>Note that if you are using the Docker container, this is done automatically.</p>"},{"location":"usage/configuration/environment/#set-the-base-url","title":"Set the Base URL","text":"<p>The Base URL is the hostname and path to the ROOT of the API on your hosting system. Knowing this allows the API to build paths in responses and internally.</p> <pre><code>BASE_URL=https://api.my-server.com\n</code></pre>"},{"location":"usage/configuration/environment/#set-the-api-root-prefix-optional","title":"Set the API Root Prefix (Optional)","text":"<p>If you want to add a prefix to all the routes, you can set it here. This is useful if you are running multiple APIs on the same server and want to avoid route conflicts, or for versioning.</p> <pre><code>API_ROOT=/api/v1\n</code></pre> <p>This will prefix all routes with <code>/api/v1</code>, so <code>/users</code> becomes <code>/api/v1/users</code> and so on. If this is not set, the API will use the root <code>/</code> as the prefix. Do not add a trailing <code>/</code> to the prefix, though if present it will be stripped anyway.</p>"},{"location":"usage/configuration/environment/#configure-the-database-settings","title":"Configure the database Settings","text":"<p>Edit the below part of the <code>.env</code> file to configure your database. If this is incorrect, the API will clear all routes and only display an error.</p> <pre><code>DB_USER=dbuser\nDB_PASSWORD=my_secret_passw0rd\nDB_ADDRESS=localhost\nDB_PORT=5432\nDB_NAME=my_database_name\n</code></pre>"},{"location":"usage/configuration/environment/#change-the-secret_key","title":"Change the SECRET_KEY","text":"<p>Do not leave this as default, generate a new unique key for each of your projects!</p> <p>To generate a good secret key you can use the below command on Linux or Mac:</p> <pre><code>$ openssl rand -base64 32\nxtFhsNhbGOJG//TAtDNtoTxV/hVDvssC79ApNm0gs7w=\n</code></pre> <p>or a one-liner using Python:</p> <pre><code>$ python -c 'import secrets; print(secrets.token_hex(32))'\nd0d83c7ac2f3e4dfa205dc3c51b4952ad57fa8a842c8417168dc46bc07fbc1f8\n</code></pre> <p>Then replace the default value in the <code>.env</code> file as so:</p> <pre><code>SECRET_KEY=d0d83c7ac2f3e4dfa205dc3c51b4952ad57fa8a842c8417168dc46bc07fbc1f8\n</code></pre>"},{"location":"usage/configuration/environment/#token-expiry-setting","title":"Token Expiry Setting","text":"<p>This is how long (in minutes) before the access (Bearer) Token expires and needs to be refreshed. Default is 120 minutes.</p> <pre><code>ACCESS_TOKEN_EXPIRE_MINUTES=120\n</code></pre>"},{"location":"usage/configuration/environment/#check-cors-settings","title":"Check CORS Settings","text":"<p>Cross-Origin Resource Sharing (CORS) is an HTTP-header based mechanism that allows a server to indicate any origins (domain, scheme, or port) other than its own from which a browser should permit loading resources.</p> <p>For a PUBLIC API (unless its going through an API gateway!), set <code>CORS_ORIGINS=*</code>, otherwise list the domains (and ports) required. If you use an API gateway of some nature, that will probably need to be listed.</p> <pre><code>CORS_ORIGINS=*\n</code></pre> <p>If the database is not configured or cannot be reached, the Application will disable all routes, print an error to the console, and return a a 500 status code with a clear JSON message for all routes. This saves the ugly default \"Internal Server Error\" from being displayed.</p>"},{"location":"usage/configuration/environment/#change-the-email-server-settings","title":"Change the Email Server settings","text":"<p>The API will currently only send an email when a new user registers (though we will make more use of this in future), so you need to have valid email account details entered into the <code>.env</code> file.</p> <p>For development and testing, I can recommend using Mailtrap to avoid filling up your mailbox with development spam (note that the Unit/Integration tests will automatically disable the mail functionality for this reason).</p> <p>MailTrap offers a free Email capture service with a virtual web-based Inbox. Its great for developing and manually testing code that includes email sending, I can't recommend it highly enough.</p> <p>Once you have the email settings, replace the default values in the <code>.env</code> file:</p> <pre><code>MAIL_USERNAME=emailuser\nMAIL_PASSWORD=letmein\nMAIL_FROM=my_api@provider.com\nMAIL_PORT=587\nMAIL_SERVER=smtp.mailserver.com\nMAIL_FROM_NAME=\"FastAPI Template\"\n</code></pre>"},{"location":"usage/configuration/environment/#example-full-env-file","title":"Example full <code>.env</code> file","text":"<p>Below is a full .env file. This can also be found in the root of the API as <code>.env.example</code>.</p> <p>The <code>TEST_DB_xxx</code> variables are not used at the moment, they will allow the use of Postgres as the testing datbase instead of the default SQLite.</p> <p>Tip</p> <p>If you use the <code>develop</code> branch, Postgres is enabled for testing and is used by default.</p> <p>The GitHub action will automatically create a Postgres database for testing and run the tests against it.</p> <pre><code># The Base API Url. This is where your API wil be served from, and can be read\n# in the application code. It has no effect on the running of the applciation\n# but is an easy way to build a path for API responses. Defaults to\n# http://localhost:8000\nBASE_URL=http://localhost:8000\n\n# Database Settings These must be changed to match your setup, and the database\n# must already exist.\nDB_USER=dbuser\nDB_PASSWORD=my_secret_passw0rd\nDB_ADDRESS=localhost             # use 'postgres' if using using Docker\nDB_PORT=5432\nDB_NAME=my_database_name\n\n# Database settings to use for testing. These must be changed to match your\n# setup. Note that User/Pass and Server/Port are the same as above, but the\n# database name should be different to avoid conflicts. This database needs to\n# already exist.\nTEST_DB_NAME=my_database_name_tests\n\n# generate your own super secret key here, used by the JWT functions.\n# 32 characters or longer, definately change the below!!\nSECRET_KEY=change_me_to_something_secret\n\n# How long the access token is valid for, in minutes. Defaults to 120 (2 hours)\nACCESS_TOKEN_EXPIRE_MINUTES=120\n\n# List of origins that can access this API, separated by a comma, eg:\n# CORS_ORIGINS=http://localhost,https://www.gnramsay.com\n# If you want all origins to access (the default), use * or comment out:\nCORS_ORIGINS=*\n\n# Email Settings specific to your email provider\nMAIL_USERNAME=test_username\nMAIL_PASSWORD=s3cr3tma1lp@ssw0rd\nMAIL_FROM=test@email.com\nMAIL_PORT=587\nMAIL_SERVER=mail.server.com\nMAIL_FROM_NAME=\"FastAPI Template\"\n\n# Common Email Settings\nMAIL_STARTTLS=True\nMAIL_SSL_TLS=False\nMAIL_USE_CREDENTIALS=True\nMAIL_VALIDATE_CERTS=True\n</code></pre>"},{"location":"usage/configuration/setup/","title":"Install Dependencies","text":""},{"location":"usage/configuration/setup/#set-up-a-virtual-environment","title":"Set up a Virtual Environment","text":"<p>It is always a good idea to set up dedicated Virtual Environment when you are developing a Python application. If you use Poetry, this will be done automatically for you when you run <code>poetry install</code>.</p> <p>Tip</p> <p>I recommend using Poetry for this project as that is how it has been developed. Also, using Poetry will automatically set up a Virtual Environment for you and install the <code>api-admin</code> command (see later)</p> <p>Otherwise, Pyenv has a virtualenv plugin which is very easy to use.</p> <p>Also, check out this freeCodeCamp tutorial or a similar RealPython one for some great info. If you are going this (oldschool!) way, I'd recommend using Virtualenv instead of the built in <code>venv</code> tool (which is a subset of this).</p>"},{"location":"usage/configuration/setup/#install-required-dependencies","title":"Install required Dependencies","text":"<p>The project has been set up using Poetry to organize and install dependencies. If you have Poetry installed, simply run the following to install all that is needed.</p> <pre><code>$ poetry install\n</code></pre> <p>If you do not (or cannot) have Poetry installed, I have provided an auto-generated <code>requirements.txt</code> in the project root which you can use as normal:</p> <pre><code>$ pip install -r requirements.txt\n</code></pre> <p>The above will install <code>production</code> dependencies only. If you want to install <code>development</code> dependencies as well, use the following instead:</p> <pre><code>$ pip install -r requirements-dev.txt\n</code></pre> <p>Warning</p> <p>If you are NOT using Poetry, the <code>api-admin</code> command will not be available. However, you can run the same command using the following from the project root:</p> <pre><code>$ python app/api-admin.py\n</code></pre> <p>I definately recommend using Poetry if you can though, it makes dealing with updates and conflicts very easy.</p> <p>If using poetry you now need to activate the VirtualEnv:</p> <pre><code>$ poetry shell\n</code></pre>"},{"location":"usage/configuration/setup/#install-git-pre-commit-hooks","title":"Install Git Pre-Commit hooks","text":"<p>This stage is optional but recommended (however it is compulsory if you are submitting a Pull Request).</p> <pre><code>$ pre-commit install\npre-commit installed at .git/hooks/pre-commit\n</code></pre> <p>This will ensure that all code meets the required linting standard before being committed.</p>"},{"location":"usage/configuration/setup/#run-pre-commit-manually","title":"Run pre-commit manually","text":"<p>You can run these checks manually on all files using the below command :</p> <pre><code>$ poe pre\n</code></pre>"}]}