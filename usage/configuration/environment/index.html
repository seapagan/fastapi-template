<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://api-template.seapagan.net/usage/configuration/environment/ rel=canonical><link href=../../installation/ rel=prev><link href=../setup/ rel=next><link href=../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.5.50" name=generator><title>Environment File - FastAPI Template</title><link href=../../../assets/stylesheets/main.a40c8224.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../assets/_mkdocstrings.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent=blue data-md-color-primary=light-blue data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#environment-variables> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="FastAPI Template" class="md-header__button md-logo" data-md-component=logo href=../../.. title="FastAPI Template"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FastAPI Template </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Environment File </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix tabindex=0> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/seapagan/fastapi-template title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg> </div> <div class=md-source__repository> seapagan/fastapi-template </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="FastAPI Template" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="FastAPI Template"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> FastAPI Template </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/seapagan/fastapi-template title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg> </div> <div class=md-source__repository> seapagan/fastapi-template </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../important/ class=md-nav__link> <span class=md-ellipsis> Breaking Changes </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_3_2 type=checkbox> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_3_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Environment File </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Environment File </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#set-up-the-env-file> <span class=md-ellipsis> Set up the .env file </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#set-the-base-url> <span class=md-ellipsis> Set the Base URL </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#set-the-api-root-prefix-optional> <span class=md-ellipsis> Set the API Root Prefix (Optional) </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#disable-the-root-route> <span class=md-ellipsis> Disable the Root Route </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#configure-the-database-settings> <span class=md-ellipsis> Configure the database Settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#change-the-secret_key> <span class=md-ellipsis> Change the SECRET_KEY </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#token-expiry-setting> <span class=md-ellipsis> Token Expiry Setting </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#check-cors-settings> <span class=md-ellipsis> Check CORS Settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#change-the-email-server-settings> <span class=md-ellipsis> Change the Email Server settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example-full-env-file> <span class=md-ellipsis> Example full .env file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../setup/ class=md-nav__link> <span class=md-ellipsis> Install Dependencies </span> </a> </li> <li class=md-nav__item> <a href=../database/ class=md-nav__link> <span class=md-ellipsis> Setup Database </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../add-user/ class=md-nav__link> <span class=md-ellipsis> Add a User </span> </a> </li> <li class=md-nav__item> <a href=../../user-control/ class=md-nav__link> <span class=md-ellipsis> User Control via the CLI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../customization/meta/ class=md-nav__link> <span class=md-ellipsis> Customization </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../development/local/ class=md-nav__link> <span class=md-ellipsis> Development and Testing </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../how-to-guides/ class=md-nav__link> <span class=md-ellipsis> Guides and How-to's </span> </a> </li> <li class=md-nav__item> <a href=../../../project-organization/ class=md-nav__link> <span class=md-ellipsis> Project Organization </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> </li> <li class=md-nav__item> <a href=../../../deployment/deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/api/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/swagger/ class=md-nav__link> <span class=md-ellipsis> Interactive API Docs </span> </a> </li> <li class=md-nav__item> <a href=../../../future/ class=md-nav__link> <span class=md-ellipsis> Future Plans </span> </a> </li> <li class=md-nav__item> <a href=../../../known-issues/ class=md-nav__link> <span class=md-ellipsis> Known Issues </span> </a> </li> <li class=md-nav__item> <a href=../../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#set-up-the-env-file> <span class=md-ellipsis> Set up the .env file </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#set-the-base-url> <span class=md-ellipsis> Set the Base URL </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#set-the-api-root-prefix-optional> <span class=md-ellipsis> Set the API Root Prefix (Optional) </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#disable-the-root-route> <span class=md-ellipsis> Disable the Root Route </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#configure-the-database-settings> <span class=md-ellipsis> Configure the database Settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#change-the-secret_key> <span class=md-ellipsis> Change the SECRET_KEY </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#token-expiry-setting> <span class=md-ellipsis> Token Expiry Setting </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#check-cors-settings> <span class=md-ellipsis> Check CORS Settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#change-the-email-server-settings> <span class=md-ellipsis> Change the Email Server settings </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example-full-env-file> <span class=md-ellipsis> Example full .env file </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=environment-variables>Environment Variables</h1> <h2 id=set-up-the-env-file>Set up the <code>.env</code> file</h2> <p>Database (and other) settings can be read from environment variables or from a <code>.env</code> file in the project root. See the <code>.env.example</code> file for how to use, in fact you can just copy this file to <code>.env</code> and edit the settings as required.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The Database (and test database if you are running the tests) and User must already exist in your Postgres system!</p> <p><strong>Note that if you are using the <a href=../../../development/docker/ >Docker</a> container, this is done automatically.</strong></p> </div> <h2 id=set-the-base-url>Set the Base URL</h2> <p>The Base URL is the hostname and path to the ROOT of the API on your hosting system. Knowing this allows the API to build paths in responses and internally.</p> <div class=highlight><pre><span></span><code><span class=na>BASE_URL</span><span class=o>=</span><span class=s>https://api.my-server.com</span>
</code></pre></div> <h2 id=set-the-api-root-prefix-optional>Set the API Root Prefix (Optional)</h2> <p>If you want to add a prefix to all the routes, you can set it here. This is useful if you are running multiple APIs on the same server and want to avoid route conflicts, or for versioning.</p> <div class=highlight><pre><span></span><code><span class=na>API_ROOT</span><span class=o>=</span><span class=s>/api/v1</span>
</code></pre></div> <p>This will prefix all routes with <code>/api/v1</code>, so <code>/users</code> becomes <code>/api/v1/users</code> and so on. If this is not set, the API will use the root <code>/</code> as the prefix. Do not add a trailing <code>/</code> to the prefix, though if present it will be stripped anyway.</p> <h2 id=disable-the-root-route>Disable the Root Route</h2> <p>By default, the root route <code>/</code> is enabled and returns an HTML page with a welcome message if accessed through a browser or a JSON response if accessed directly. If you want to disable this, set the below variable to <code>False</code>.</p> <div class=highlight><pre><span></span><code><span class=na>NO_ROOT_ROUTE</span><span class=o>=</span><span class=s>True</span>
</code></pre></div> <p>If the variable is not set, or set to <code>False</code>, the root route will be enabled as usual. If set to <code>True</code>, the root route will return a 404 error and a JSON message.</p> <div class="admonition note"> <p class=admonition-title>API Root Prefix</p> <p>This works in conjunction with the <code>API_ROOT</code> setting, so if the root route is disabled and the API Root is set to <code>/api/v1</code>, the API will return a 404 error and a JSON message when accessing <code>/api/v1</code>.</p> </div> <h2 id=configure-the-database-settings>Configure the database Settings</h2> <p>Edit the below part of the <code>.env</code> file to configure your database. If this is incorrect, the API will clear all routes and only display an error.</p> <div class=highlight><pre><span></span><code><span class=na>DB_USER</span><span class=o>=</span><span class=s>dbuser</span>
<span class=na>DB_PASSWORD</span><span class=o>=</span><span class=s>my_secret_passw0rd</span>
<span class=na>DB_ADDRESS</span><span class=o>=</span><span class=s>localhost</span>
<span class=na>DB_PORT</span><span class=o>=</span><span class=s>5432</span>
<span class=na>DB_NAME</span><span class=o>=</span><span class=s>my_database_name</span>
</code></pre></div> <p>For testing, also set the name of the test database:</p> <div class=highlight><pre><span></span><code><span class=na>TEST_DB_NAME</span><span class=o>=</span><span class=s>my_test_database_name</span>
</code></pre></div> <div class="admonition danger"> <p class=admonition-title>Database Setup</p> <p>The database user, and both the prod and test database must already exist, and the <code>DB_USER</code> must have the correct permissions to access them. The API will not create the database for you.</p> <p>If you don't intend to run the tests (ie running on a production server), you don't need to create the test database.</p> </div> <h2 id=change-the-secret_key>Change the SECRET_KEY</h2> <p>Do not leave this as default, generate a new unique key for each of your projects!</p> <p>To generate a good secret key you can use the below command on Linux or Mac:</p> <div class=highlight><pre><span></span><code><span class=gp>$ </span>openssl<span class=w> </span>rand<span class=w> </span>-base64<span class=w> </span><span class=m>32</span>
<span class=go>xtFhsNhbGOJG//TAtDNtoTxV/hVDvssC79ApNm0gs7w=</span>
</code></pre></div> <p>or a one-liner using Python:</p> <div class=highlight><pre><span></span><code><span class=gp>$ </span>python<span class=w> </span>-c<span class=w> </span><span class=s1>'import secrets; print(secrets.token_hex(32))'</span>
<span class=go>d0d83c7ac2f3e4dfa205dc3c51b4952ad57fa8a842c8417168dc46bc07fbc1f8</span>
</code></pre></div> <p>Then replace the default value in the <code>.env</code> file as so:</p> <div class=highlight><pre><span></span><code><span class=na>SECRET_KEY</span><span class=o>=</span><span class=s>d0d83c7ac2f3e4dfa205dc3c51b4952ad57fa8a842c8417168dc46bc07fbc1f8</span>
</code></pre></div> <h2 id=token-expiry-setting>Token Expiry Setting</h2> <p>This is how long (in minutes) before the access (Bearer) Token expires and needs to be refreshed. Default is 120 minutes.</p> <div class=highlight><pre><span></span><code><span class=na>ACCESS_TOKEN_EXPIRE_MINUTES</span><span class=o>=</span><span class=s>120</span>
</code></pre></div> <h2 id=check-cors-settings>Check CORS Settings</h2> <p>Cross-Origin Resource Sharing (<a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS target=_blank>CORS</a>) is an HTTP-header based mechanism that allows a server to indicate any origins (domain, scheme, or port) other than its own from which a browser should permit loading resources.</p> <p>For a <strong>PUBLIC API</strong> (unless its going through an API gateway!), set <code>CORS_ORIGINS=*</code>, otherwise list the domains (<strong>and ports</strong>) required. If you use an API gateway of some nature, that will probably need to be listed.</p> <div class=highlight><pre><span></span><code><span class=na>CORS_ORIGINS</span><span class=o>=</span><span class=s>*</span>
</code></pre></div> <p>If the database is not configured or cannot be reached, the Application will disable all routes, print an error to the console, and return a a 500 status code with a clear JSON message for all routes. This saves the ugly default "Internal Server Error" from being displayed.</p> <h2 id=change-the-email-server-settings>Change the Email Server settings</h2> <p>The API will currently only send an email when a new user registers (though we will make more use of this in future), so you need to have valid email account details entered into the <code>.env</code> file.</p> <p>For development and testing, I can recommend using <a href=https://mailtrap.io target=_blank>Mailtrap</a> to avoid filling up your mailbox with development spam (note that the Unit/Integration tests will automatically disable the mail functionality for this reason).</p> <p>MailTrap offers a free Email capture service with a virtual web-based Inbox. Its great for developing and manually testing code that includes email sending, I can't recommend it highly enough.</p> <p>Once you have the email settings, replace the default values in the <code>.env</code> file:</p> <div class=highlight><pre><span></span><code><span class=na>MAIL_USERNAME</span><span class=o>=</span><span class=s>emailuser</span>
<span class=na>MAIL_PASSWORD</span><span class=o>=</span><span class=s>letmein</span>
<span class=na>MAIL_FROM</span><span class=o>=</span><span class=s>my_api@provider.com</span>
<span class=na>MAIL_PORT</span><span class=o>=</span><span class=s>587</span>
<span class=na>MAIL_SERVER</span><span class=o>=</span><span class=s>smtp.mailserver.com</span>
<span class=na>MAIL_FROM_NAME</span><span class=o>=</span><span class=s>"FastAPI Template"</span>
</code></pre></div> <h2 id=example-full-env-file>Example full <code>.env</code> file</h2> <p>Below is a full .env file. This can also be found in the root of the API as <code>.env.example</code>.</p> <div class=highlight><pre><span></span><code><span class=c1># The Base API Url. This is where your API wil be served from, and can be read</span>
<span class=c1># in the application code. It has no effect on the running of the applciation</span>
<span class=c1># but is an easy way to build a path for API responses. Defaults to</span>
<span class=c1># http://localhost:8000</span>
<span class=na>BASE_URL</span><span class=o>=</span><span class=s>http://localhost:8000</span>

<span class=c1># The root path for the API. This is the path that the API will be served from,</span>
<span class=c1>#defaults to '' (empty string). If you want to serve the API from a subpath,</span>
<span class=c1># change this to the subpath, eg: /api/v1</span>
<span class=c1># API_ROOT=/api/v1</span>

<span class=c1># Set to True to disable the root route, and return a 404 for the root path. If</span>
<span class=c1># not set, defaults to False.</span>
<span class=na>NO_ROOT_ROUTE</span><span class=o>=</span><span class=s>False</span>

<span class=c1># Database Settings These must be changed to match your setup, and the database</span>
<span class=c1># must already exist.</span>
<span class=na>DB_USER</span><span class=o>=</span><span class=s>dbuser</span>
<span class=na>DB_PASSWORD</span><span class=o>=</span><span class=s>my_secret_passw0rd</span>
<span class=na>DB_ADDRESS</span><span class=o>=</span><span class=s>localhost</span>
<span class=na>DB_PORT</span><span class=o>=</span><span class=s>5432</span>
<span class=na>DB_NAME</span><span class=o>=</span><span class=s>my_database_name</span>

<span class=c1># Database settings to use for testing. These must be changed to match your</span>
<span class=c1># setup. Note that User/Pass and Server/Port are the same as above, but the</span>
<span class=c1># database name should be different to avoid conflicts. This database needs to</span>
<span class=c1># already exist.</span>
<span class=na>TEST_DB_NAME</span><span class=o>=</span><span class=s>my_database_name_tests</span>

<span class=c1># generate your own super secret key here, used by the JWT functions.</span>
<span class=c1># 32 characters or longer, definately change the below!!</span>
<span class=na>SECRET_KEY</span><span class=o>=</span><span class=s>change_me_to_something_secret</span>

<span class=c1># How long the access token is valid for, in minutes. Defaults to 120 (2 hours)</span>
<span class=na>ACCESS_TOKEN_EXPIRE_MINUTES</span><span class=o>=</span><span class=s>120</span>

<span class=c1># List of origins that can access this API, separated by a comma, eg:</span>
<span class=c1># CORS_ORIGINS=http://localhost,https://www.gnramsay.com</span>
<span class=c1># If you want all origins to access (the default), use * or comment out:</span>
<span class=na>CORS_ORIGINS</span><span class=o>=</span><span class=s>*</span>

<span class=c1># Email Settings specific to your email provider</span>
<span class=na>MAIL_USERNAME</span><span class=o>=</span><span class=s>test_username</span>
<span class=na>MAIL_PASSWORD</span><span class=o>=</span><span class=s>s3cr3tma1lp@ssw0rd</span>
<span class=na>MAIL_FROM</span><span class=o>=</span><span class=s>test@email.com</span>
<span class=na>MAIL_PORT</span><span class=o>=</span><span class=s>587</span>
<span class=na>MAIL_SERVER</span><span class=o>=</span><span class=s>mail.server.com</span>
<span class=na>MAIL_FROM_NAME</span><span class=o>=</span><span class=s>"FastAPI Template"</span>

<span class=c1># Common Email Settings</span>
<span class=na>MAIL_STARTTLS</span><span class=o>=</span><span class=s>True</span>
<span class=na>MAIL_SSL_TLS</span><span class=o>=</span><span class=s>False</span>
<span class=na>MAIL_USE_CREDENTIALS</span><span class=o>=</span><span class=s>True</span>
<span class=na>MAIL_VALIDATE_CERTS</span><span class=o>=</span><span class=s>True</span>
</code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component=top hidden type=button> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: Installation" href=../../installation/ class="md-footer__link md-footer__link--prev"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Installation </div> </div> </a> <a aria-label="Next: Install Dependencies" href=../setup/ class="md-footer__link md-footer__link--next"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Install Dependencies </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Â© 2023 Grant Ramsay (Seapagan) </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/seapagan rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a class=md-social__link href=https://twitter.com/gnramsay-dev rel=noopener target=_blank title=twitter.com> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.footer", "content.code.copy", "content.code.annotate", "navigation.tracking", "navigation.indexes", "navigation.prune", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.60a45f97.min.js></script> <script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body> </html>